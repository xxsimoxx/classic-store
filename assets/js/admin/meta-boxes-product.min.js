jQuery(function (t) { let e = !1; function i(e) { var i = t("select#product-type").val(), a = t("input#_virtual:checked").length, o = t("input#_downloadable:checked").length, r = ".hide_if_downloadable, .hide_if_virtual", n = ".show_if_downloadable, .show_if_virtual"; t.each(woocommerce_admin_meta_boxes.product_types, function (t, e) { r = r + ", .hide_if_" + e, n = n + ", .show_if_" + e }), t(r, e).show(), t(n, e).hide(), o && t(".show_if_downloadable", e).show(), a && t(".show_if_virtual", e).show(), t(".show_if_" + i, e).show(), o && t(".hide_if_downloadable", e).hide(), a && t(".hide_if_virtual", e).hide(), t(".hide_if_" + i, e).hide() } function a() { i(), t("input#_manage_stock").trigger("change"), t(".woocommerce_options_panel").each(function () { var e = t(this).children(".options_group"); if (0 !== e.length && e.filter(function () { return "none" === t(this).css("display") }).length === e.length) { var i = t(this).prop("id"); t(".product_data_tabs").find('li a[href="#' + i + '"]').parent().hide() } }) } function o(e) { var i = t(e).next().is(".hasDatepicker") ? "minDate" : "maxDate", a = "minDate" === i ? t(e).next() : t(e).prev(), o = t(e).datepicker("getDate"); t(a).datepicker("option", i, o), t(e).trigger("change") } t(window).on("beforeunload", function () { e = !0 }), t(function () { t('[id$="-all"] > ul.categorychecklist').each(function () { var e = t(this), i = e.find(":checked").first(); if (i.length) { var a = e.find("input").position().top, o = i.position().top; e.closest(".tabs-panel").scrollTop(o - a + 5) } }) }), t("#upsell_product_data").on("keypress", function (t) { if (13 === t.keyCode) return !1 }), t("body").hasClass("wc-wp-version-gte-55") ? t(".type_box").appendTo("#woocommerce-product-data .hndle") : t(".type_box").appendTo("#woocommerce-product-data .hndle span"), t(function () { var e = t("#woocommerce-product-data"); e.find(".hndle").off("click.postboxes"), e.on("click", ".hndle", function (i) { !t(i.target).filter("input, option, label, select").length && (e.hasClass("closed") ? e.removeClass("closed") : e.addClass("closed")) }) }), t(function () { woocommerce_admin_meta_boxes.has_attributes || t("button.add_attribute").trigger("click") }), t("#catalog-visibility").find(".edit-catalog-visibility").on("click", function () { return t("#catalog-visibility-select").is(":hidden") && (t("#catalog-visibility-select").slideDown("fast"), t(this).hide()), !1 }), t("#catalog-visibility").find(".save-post-visibility").on("click", function () { t("#catalog-visibility-select").slideUp("fast"), t("#catalog-visibility").find(".edit-catalog-visibility").show(); var e = t("input[name=_visibility]:checked").attr("data-label"); return t("input[name=_featured]").is(":checked") && (e = e + ", " + woocommerce_admin_meta_boxes.featured_label, t("input[name=_featured]").attr("checked", "checked")), t("#catalog-visibility-display").text(e), !1 }), t("#catalog-visibility").find(".cancel-post-visibility").on("click", function () { t("#catalog-visibility-select").slideUp("fast"), t("#catalog-visibility").find(".edit-catalog-visibility").show(); var e = t("#current_visibility").val(), i = t("#current_featured").val(); t("input[name=_visibility]").prop("checked", !1), t("input[name=_visibility][value=" + e + "]").attr("checked", "checked"); var a = t("input[name=_visibility]:checked").attr("data-label"); return "yes" === i ? (a = a + ", " + woocommerce_admin_meta_boxes.featured_label, t("input[name=_featured]").attr("checked", "checked")) : t("input[name=_featured]").prop("checked", !1), t("#catalog-visibility-display").text(a), !1 }), t("select#product-type").on("change", function () { var e, i = t(this).val(); "variable" === i ? (t("input#_manage_stock").trigger("change"), t("input#_downloadable").prop("checked", !1), t("input#_virtual").prop("checked", !1)) : "grouped" === i ? (t("input#_downloadable").prop("checked", !1), t("input#_virtual").prop("checked", !1)) : "external" === i && (t("input#_downloadable").prop("checked", !1), t("input#_virtual").prop("checked", !1)), a(), e = function t(e) { switch (e) { case "simple": return woocommerce_admin_meta_boxes.i18n_product_simple_tip; case "grouped": return woocommerce_admin_meta_boxes.i18n_product_grouped_tip; case "external": return woocommerce_admin_meta_boxes.i18n_product_external_tip; case "variable": return woocommerce_admin_meta_boxes.i18n_product_variable_tip; default: return woocommerce_admin_meta_boxes.i18n_product_other_tip } }(i), t("#tiptip_holder").removeAttr("style"), t("#tiptip_arrow").removeAttr("style"), t(".woocommerce-product-type-tip").attr("tabindex", "0").attr("aria-label", t("<div />").html(e).text()).tipTip({ attribute: "data-tip", content: e, fadeIn: 50, fadeOut: 50, delay: 200, keepAlive: !0 }), t("ul.wc-tabs li:visible").eq(0).find("a").trigger("click"), t(document.body).trigger("woocommerce-product-type-change", i, t(this)) }).trigger("change"), t("input#_downloadable").on("change", function () { a() }), t("input#_virtual").on("change", function () { a(), t(this).is(":checked") && t(".shipping_options.shipping_tab").hasClass("active") && t(".general_options.general_tab > a").trigger("click") }), t(".sale_price_dates_fields").each(function () { var e = t(this), i = !1, a = e.closest("div, table"); e.find("input").each(function () { "" !== t(this).val() && (i = !0) }), i ? (a.find(".sale_schedule").hide(), a.find(".sale_price_dates_fields").show()) : (a.find(".sale_schedule").show(), a.find(".sale_price_dates_fields").hide()) }), t("#woocommerce-product-data").on("click", ".sale_schedule", function () { var e = t(this).closest("div, table"); return t(this).hide(), e.find(".cancel_sale_schedule").show(), e.find(".sale_price_dates_fields").show(), !1 }), t("#woocommerce-product-data").on("click", ".cancel_sale_schedule", function () { var e = t(this).closest("div, table"); return t(this).hide(), e.find(".sale_schedule").show(), e.find(".sale_price_dates_fields").hide(), e.find(".sale_price_dates_fields").find("input").val(""), !1 }), t("#woocommerce-product-data").on("click", ".downloadable_files a.insert", function () { return t(this).closest(".downloadable_files").find("tbody").append(t(this).data("row")), !1 }), t("#woocommerce-product-data").on("click", ".downloadable_files a.delete", function () { return t(this).closest("tr").remove(), !1 }), t("input#_manage_stock").on("change", function () { let e = t(this).is(":checked"), i = t("select#product-type").val(); (function e(i, a) { let o = t(".stock_fields"), r = t(".stock_status_field"); o.toggle(i), r.toggle(!i && !r.is(".hide_if_" + a)) })(e, i), t("input.variable_manage_stock").trigger("change") }).trigger("change"), t(".sale_price_dates_fields").each(function () { t(this).find("input").datepicker({ defaultDate: "", dateFormat: "yy-mm-dd", numberOfMonths: 1, showButtonPanel: !0, onSelect: function () { o(t(this)) } }), t(this).find("input").each(function () { o(t(this)) }) }); let r = t(".product_attributes"); if (1 === r.length) { t("#product_attributes").on("woocommerce_tab_shown", function () { m(); let t = r.find(".woocommerce_attribute").get(); 0 === t.length && h() }); let n = r.find(".woocommerce_attribute").get(); n.sort(function (e, i) { var a = parseInt(t(e).attr("rel"), 10), o = parseInt(t(i).attr("rel"), 10); return a < o ? -1 : a > o ? 1 : 0 }), t(n).each(function (t, e) { r.append(e) }) } function c() { t(".product_attributes .woocommerce_attribute").each(function (e, i) { t(".attribute_position", i).val(parseInt(t(i).index(".product_attributes .woocommerce_attribute"), 10)) }) } var l, s, d, u = []; function p(t) { var e = t.find("input.woocommerce_attribute_used_for_variations"); e.length && e.is(":checked") ? t.find("textarea").attr("placeholder", woocommerce_admin_meta_boxes.i18n_attributes_used_for_variations_placeholder) : t.find("textarea").attr("placeholder", woocommerce_admin_meta_boxes.i18n_attributes_default_placeholder) } async function f(a) { try { var o, r; !function e() { let i = t("#product_attributes"); i.block({ message: null, overlayCSS: { background: "#fff", opacity: .6 } }) }(); let n = t(".product_attributes .woocommerce_attribute").length, l = await (o = n, r = a, new Promise(function (e, i) { t.post({ url: woocommerce_admin_meta_boxes.ajax_url, data: { action: "woocommerce_add_attribute", product_type: t("#product-type").val(), taxonomy: r || "", i: o, security: woocommerce_admin_meta_boxes.add_attribute_nonce }, success: function (t) { e(t) }, error: function (t, e, a) { i({ jqXHR: t, textStatus: e, errorThrown: a }) } }) })), s = t("#product_attributes .product_attributes"), d = t(l).appendTo(s); i(d), t(document.body).trigger("wc-enhanced-select-init"), c(), function t(e) { e.find("h3").trigger("click") }(d), void 0 === a && (p(d), t(".woocommerce_attribute input.woocommerce_attribute_used_for_variations").on("change", function () { p(t(this).closest(".woocommerce_attribute")) })), t(document.body).trigger("woocommerce_added_attribute"), jQuery.maybe_disable_save_button() } catch (u) { if (e) return; throw alert(woocommerce_admin_meta_boxes.i18n_add_attribute_error_notice), u } finally { !function e() { let i = t("#product_attributes"); i.unblock() }() } } function b(t) { f(t) } function h() { f() } function m() { let e = t(".product_attributes .woocommerce_attribute"); if (1 === e.length) { let i = e.first(), a = i.find('input[name="attribute_names[0]"]'), o = i.find('input[name="attribute_values[0]"]'); a.val() || o.val() || i.remove() } } t(".product_attributes .woocommerce_attribute").each(function (e, i) { "none" !== t(i).css("display") && t(i).is(".taxonomy") && (u.push(t(i).data("taxonomy")), t("select.attribute_taxonomy").find('option[value="' + t(i).data("taxonomy") + '"]').attr("disabled", "disabled")), ("undefined" === t(i).attr("data-taxonomy") || !1 === t(i).attr("data-taxonomy") || "" === t(i).attr("data-taxonomy")) && (p(t(i)), t(".woocommerce_attribute input.woocommerce_attribute_used_for_variations").on("change", function () { p(t(i)) })) }), t("select.wc-attribute-search").data("disabled-items", u), localStorage.getItem("attributes-notice-dismissed") && t("#product_attributes .notice").hide(), t("#product_attributes .notice.woocommerce-message button").on("click", function (e) { t("#product_attributes .notice").hide(), localStorage.setItem("attributes-notice-dismissed", "true") }), t("select.wc-attribute-search").on("select2:select", function (e) { let i = e && e.params && e.params.data && e.params.data.id; if (i) { var a, o, r, n; m(), f(a = i), n = u = (o = u, r = i, o.includes(r) ? attr : [...o, r]), t("select.wc-attribute-search").data("disabled-items", n) } return t(this).val(null), t(this).trigger("change"), !1 }), t("button.add_custom_attribute").on("click", function () { return h(), !1 }), t(".product_attributes").on("blur", "input.attribute_name", function () { var e = t(this), i = e.val(), a = e.closest(".woocommerce_attribute").find("strong.attribute_name"); "" === i ? a.addClass("placeholder").text(woocommerce_admin_meta_boxes.i18n_attribute_name_placeholder) : a.removeClass("placeholder").text(i) }), t(".product_attributes").on("click", "button.select_all_attributes", function () { t(".product_attributes").block({ message: null, overlayCSS: { background: "#fff", opacity: .6 } }); var e = t(this).closest(".woocommerce_attribute"), i = { action: "woocommerce_json_search_taxonomy_terms", taxonomy: e.data("taxonomy"), security: wc_enhanced_select_params.search_taxonomy_terms_nonce }; return t.get(woocommerce_admin_meta_boxes.ajax_url, i, function (i) { i.errors ? window.alert(i.errors) : i && i.length > 0 && (i.forEach(function (t) { let i = e.find('select.attribute_values option[value="' + t.term_id + '"]'); i && i.length > 0 ? i.prop("selected", "selected") : e.find("select.attribute_values").append('<option value="' + t.term_id + '" selected="selected">' + t.name + "</option>") }), e.find("select.attribute_values").trigger("change")), t(".product_attributes").unblock() }), !1 }), t(".product_attributes").on("click", "button.select_no_attributes", function () { return t(this).closest("td").find("select option").prop("selected", !1), t(this).closest("td").find("select").trigger("change"), !1 }), t("#product_attributes").on("click", ".product_attributes .remove_row", function () { var e = t(this).parent().parent(); return (!e.find('input[name^="attribute_variation"]').is(":visible:checked") || window.confirm(woocommerce_admin_meta_boxes.i18n_remove_used_attribute_confirmation_message)) && (e.is(".taxonomy") ? (e.find("select, input[type=text]").val(""), e.hide(), t("select.attribute_taxonomy").find('option[value="' + e.data("taxonomy") + '"]').prop("disabled", !1), u = u.filter(t => t !== e.data("taxonomy")), t("select.wc-attribute-search").data("disabled-items", u)) : (e.find("select, input[type=text]").val(""), e.hide(), c()), e.remove(), jQuery.maybe_disable_save_button()), !1 }), t(".product_attributes").sortable({ items: ".woocommerce_attribute", cursor: "move", axis: "y", handle: "h3", scrollSensitivity: 40, forcePlaceholderSize: !0, helper: "clone", opacity: .65, placeholder: "wc-metabox-sortable-placeholder", start: function (t, e) { e.item.css("background-color", "#f6f6f6") }, stop: function (t, e) { e.item.removeAttr("style"), c() } }), t(".product_attributes").on("click", "button.add_new_attribute", function (e) { e.preventDefault(), t(".product_attributes").block({ message: null, overlayCSS: { background: "#fff", opacity: .6 } }); var i = t(this).closest(".woocommerce_attribute"), a = i.data("taxonomy"), o = window.prompt(woocommerce_admin_meta_boxes.new_attribute_prompt); if (o) { var r = { action: "woocommerce_add_new_attribute", taxonomy: a, term: o, security: woocommerce_admin_meta_boxes.add_attribute_nonce }; t.post(woocommerce_admin_meta_boxes.ajax_url, r, function (e) { e.error ? window.alert(e.error) : e.slug && (i.find("select.attribute_values").append('<option value="' + e.term_id + '" selected="selected">' + e.name + "</option>"), i.find("select.attribute_values").trigger("change")), t(".product_attributes").unblock() }) } else t(".product_attributes").unblock() }), t(".save_attributes").on("click", function (e) { if (t(this).hasClass("disabled")) { e.preventDefault(); return } t(".product_attributes").block({ message: null, overlayCSS: { background: "#fff", opacity: .6 } }); var i = t(".product_attributes").find("input, select, textarea"), o = { post_id: woocommerce_admin_meta_boxes.post_id, product_type: t("#product-type").val(), data: i.serialize(), action: "woocommerce_save_attributes", security: woocommerce_admin_meta_boxes.save_attributes_nonce }; t.post(woocommerce_admin_meta_boxes.ajax_url, o, function (e) { if (e.error) window.alert(e.error); else if (e.data) { t(".product_attributes").html(e.data.html), t(".product_attributes").unblock(), a(), t("select.attribute_taxonomy").find("option").prop("disabled", !1); var i = []; t(".product_attributes .woocommerce_attribute").each(function (e, a) { "none" !== t(a).css("display") && t(a).is(".taxonomy") && (i.push(t(a).data("taxonomy")), t("select.attribute_taxonomy").find('option[value="' + t(a).data("taxonomy") + '"]').prop("disabled", !0)) }), u = i, t("select.wc-attribute-search").data("disabled-items", i); var o = window.location.toString(); o = o.replace("post-new.php?", "post.php?post=" + woocommerce_admin_meta_boxes.post_id + "&action=edit&"), t("#variable_product_options").load(o + " #variable_product_options_inner", function () { t("#variable_product_options").trigger("reload") }), t(document.body).trigger("woocommerce_attributes_saved") } }) }), t(document.body).on("click", '#variable_product_options .add-attributes-message a[href="#product_attributes"]', function () { return t('#woocommerce-product-data .attribute_tab a[href="#product_attributes"]').trigger("click"), !1 }), t(document.body).on("click", ".upload_file_button", function (e) { var i = t(this); if (s = i.closest("tr").find("td.file_url input"), e.preventDefault(), l) { l.open(); return } var a = [new wp.media.controller.Library({ library: wp.media.query(), multiple: !0, title: i.data("choose"), priority: 20, filterable: "uploaded" }),]; (l = wp.media.frames.downloadable_file = wp.media({ title: i.data("choose"), library: { type: "" }, button: { text: i.data("update") }, multiple: !0, states: a })).on("select", function () { var t = ""; l.state().get("selection").map(function (e) { (e = e.toJSON()).url && (t = e.url) }), s.val(t).trigger("change") }), l.on("ready", function () { l.uploader.options.uploader.params = { type: "downloadable_product" } }), l.open() }), t(".downloadable_files tbody").sortable({ items: "tr", cursor: "move", axis: "y", handle: "td.sort", scrollSensitivity: 40, forcePlaceholderSize: !0, helper: "clone", opacity: .65 }); var v = t("#product_image_gallery"), g = t("#product_images_container").find("ul.product_images"); t(".add_product_images").on("click", "a", function (e) { var i = t(this); if (e.preventDefault(), d) { d.open(); return } (d = wp.media.frames.product_gallery = wp.media({ title: i.data("choose"), button: { text: i.data("update") }, states: [new wp.media.controller.Library({ title: i.data("choose"), filterable: "all", multiple: !0 }),] })).on("select", function () { var t = d.state().get("selection"), e = v.val(); t.map(function (t) { if ((t = t.toJSON()).id) { e = e ? e + "," + t.id : t.id; var a = t.sizes && t.sizes.thumbnail ? t.sizes.thumbnail.url : t.url; g.append('<li class="image" data-attachment_id="' + t.id + '"><img src="' + a + '" /><ul class="actions"><li><a href="#" class="delete" title="' + i.data("delete") + '">' + i.data("text") + "</a></li></ul></li>") } }), v.val(e) }), d.open() }), g.sortable({ items: "li.image", cursor: "move", scrollSensitivity: 40, forcePlaceholderSize: !0, forceHelperSize: !1, helper: "clone", opacity: .65, placeholder: "wc-metabox-sortable-placeholder", start: function (t, e) { e.item.css("background-color", "#f6f6f6") }, stop: function (t, e) { e.item.removeAttr("style") }, update: function () { var e = ""; t("#product_images_container").find("ul li.image").css("cursor", "default").each(function () { e = e + t(this).attr("data-attachment_id") + "," }), v.val(e) } }), t("#product_images_container").on("click", "a.delete", function () { t(this).closest("li.image").remove(); var e = ""; return t("#product_images_container").find("ul li.image").css("cursor", "default").each(function () { e = e + t(this).attr("data-attachment_id") + "," }), v.val(e), t("#tiptip_holder").removeAttr("style"), t("#tiptip_arrow").removeAttr("style"), !1 }), t("#wp-content-media-buttons").append('<span class="woocommerce-help-tip" tabindex="0"></span>').find(".woocommerce-help-tip").attr("tabindex", "0").attr("for", "content").attr("aria-label", woocommerce_admin_meta_boxes.i18n_product_description_tip).tipTip({ attribute: "data-tip", content: woocommerce_admin_meta_boxes.i18n_product_description_tip, fadeIn: 50, fadeOut: 50, delay: 200, keepAlive: !0 }), t("#postexcerpt > .postbox-header > .hndle").append('<span class="woocommerce-help-tip"></span>').find(".woocommerce-help-tip").attr("tabindex", "0").attr("aria-label", woocommerce_admin_meta_boxes.i18n_product_short_description_tip).tipTip({ attribute: "data-tip", content: woocommerce_admin_meta_boxes.i18n_product_short_description_tip, fadeIn: 50, fadeOut: 50, delay: 200, keepAlive: !0 }); let y = t("#set-post-thumbnail"), w = `<span class="woocommerce-help-tip" tabindex="0" aria-label="${woocommerce_admin_meta_boxes.i18n_product_image_tip}"></span>`, k = { attribute: "data-tip", content: woocommerce_admin_meta_boxes.i18n_product_image_tip, fadeIn: 50, fadeOut: 50, delay: 200, keepAlive: !0 }; y && t(w).insertAfter(y).tipTip(k); let x = t(".add_product_images > a"); x && t(w).insertAfter(x).tipTip(k) });